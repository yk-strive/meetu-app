(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"1d09":function(e,t,n){"use strict";n.r(t);var a=n("7234"),i=n("98e3");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("392e");var r=n("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=s.exports},"38c3":function(e,t,n){"use strict";(function(e){n("e1e3"),n("921b");a(n("66fd"));var t=a(n("1d09"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"392e":function(e,t,n){"use strict";var a=n("65f2"),i=n.n(a);i.a},"65f2":function(e,t,n){},7234:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},"98e3":function(e,t,n){"use strict";n.r(t);var a=n("d9c2"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a},d9c2:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("a34a")),o=n("2f62"),r=s(n("c478"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a,i,o,r){try{var s=e[o](r),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(a,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function r(e){u(o,a,i,r,s,"next",e)}function s(e){u(o,a,i,r,s,"throw",e)}r(void 0)})}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=getApp().globalData.socket,h={name:"homeIndex",components:{},mixins:[r.default],data:function(){return{isSendSignal:!1,showDailyLogin:!1,appName:"Meet U",showSendToast:!1,userNumber:null}},computed:l({},(0,o.mapGetters)(["userInfo","dailyLogin","token"]),(0,o.mapState)({unread:function(e){return e.socketInfo.unread}})),onLoad:function(e){this.api_UserNumber()},onReady:function(){var t=this;setTimeout(function(){t.ws_init()},200),console.log(e("OnReady"," at pages\\home\\index.vue:113")),a.getStorageSync("homeSendToast")?this.showSendToast=!1:this.showSendToast=!0},onShow:function(){var t=this;if(console.log(e("OnShow"," at pages\\home\\index.vue:121")),this.api_UserInfo(),getApp().globalData.sendSignal&&(this.isSendSignal=!0,this.api_UserNumber(),setTimeout(function(){getApp().globalData.sendSignal=!1,t.isSendSignal=!1},4e3)),1==this.dailyLogin)return!1;if(a.getStorageSync("dailyLoginExpires")){var n=(new Date).getTime();n>a.getStorageSync("dailyLoginExpires")?(this.clog("mow","超过"),this.showDailyLogin=!0):(this.clog("mow","未超过"),this.showDailyLogin=!1)}else this.showDailyLogin=!0},methods:{ws_init:function(){f&&f.initSocket()},api_UserInfo:function(){var e=c(i.default.mark(function e(){var t;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http1.post("user/info");case 2:t=e.sent,0==t.code?this.$store.dispatch("changeVal",{stateKey:"userInfo",newValue:t.data}):this.modelShow("toastModal",t.msg);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),api_UserNumber:function(){var e=this;this.$http1.post("user/number").then(function(t){e.userNumber=t.data}).catch(function(e){})},api_DailyLogin:function(){var e=this,t=this;this.$http1.post("points/daily-login").then(function(n){0==n.code&&(e.modalShow("toastModal","领取成功"),e.showDailyLogin=!1,a.setStorageSync("dailyLoginExpires",t.expiresTime()))}).catch(function(t){e.showDailyLogin=!1,e.modalShow("toastModal",t.data.msg)})},getDailyLogin:function(){this.api_DailyLogin()},linkUser:function(){a.navigateTo({url:"../user/index",animationDuration:300,animationType:"fade-in"})},linkAction:function(e){switch(e){case"search":a.navigateTo({url:"../search/search",animationDuration:500,animationType:"fade-in"});break;case"send":a.getStorageSync("homeSendToast")||(a.setStorageSync("homeSendToast",!0),this.showSendToast=!1),this.modalName="bottomModal";break;case"chatList":a.navigateTo({url:"../chat/list",animationDuration:500,animationType:"fade-in"});break;case"sendText":this.modalName="",a.navigateTo({url:"../send/text",animationDuration:500,animationType:"fade-in"});break;case"sendVoice":this.modalName="",a.navigateTo({url:"../send/voice",animationDuration:500,animationType:"fade-in"});break}},expiresTime:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1>9?e.getMonth()+1:"0"+e.getMonth()+1,a=e.getDate()>9?e.getDate():"0"+e.getDate(),i=t+"/"+n+"/"+a+" 23:59:59";return new Date(i).getTime()},hideModal:function(){this.modalName=""}}};t.default=h}).call(this,n("0de9")["default"],n("6e42")["default"])}},[["38c3","common/runtime","common/vendor"]]]);