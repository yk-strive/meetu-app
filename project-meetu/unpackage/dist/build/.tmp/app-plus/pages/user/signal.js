(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/signal"],{"0f2f":function(t,e,n){"use strict";n.r(e);var a=n("b8d8"),i=n("a4b2");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("db69");var s,l=n("f0c5"),r=Object(l["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=r.exports},"17a0":function(t,e,n){},3483:function(t,e,n){"use strict";(function(t){n("e1e3"),n("921b");a(n("66fd"));var e=a(n("0f2f"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"50cf":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("a34a")),o=s(n("c478"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n,a,i,o,s){try{var l=t[o](s),r=l.value}catch(u){return void n(u)}l.done?e(r):Promise.resolve(r).then(a,i)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var o=t.apply(e,n);function s(t){l(o,a,i,s,r,"next",t)}function r(t){l(o,a,i,s,r,"throw",t)}s(void 0)})}}var u=function(){return n.e("components/mix-pulldown-refresh/mix-pulldown-refresh").then(n.bind(null,"7eee"))},d=function(){return n.e("components/mix-load-more/mix-load-more").then(n.bind(null,"9cfe"))},c=!1,f=t.createInnerAudioContext();f.autoplay=!0;var h={name:"signal",components:{mixPulldownRefresh:u,mixLoadMore:d},mixins:[o.default],data:function(){return{CustomBar:this.CustomBar,enableScroll:!0,tabsInfo:{tabsList:[{id:"1",name:"文字信号",list:[],isload:!1},{id:"2",name:"语言信号",list:[],isload:!1}],tabCur:""},signalList:null,deleteInfo:null,audioPlay:!1,audioPlayCur:-1,providerList:[],shareInfo:null}},onLoad:function(t){var e=this;f.onEnded(function(){console.log(a("播放结束"," at pages\\user\\signal.vue:111")),e.audioPlay=!1,e.audioPlayCur=-1}),this.tabsInfo.tabCur=this.tabsInfo.tabsList[0].id,t.navId&&(this.tabsInfo.tabCur="text"==t.navId?this.tabsInfo.tabsList[0].id:this.tabsInfo.tabsList[1].id),this.providerList=getApp().globalData.shareProviderList,this.api_SignalList()},methods:{api_SignalList:function(t){var e=this,n=this;if(t&&"add"==t){if(2==this.loadMoreStatus)return!1;this.page++,this.showLoadMore=!0,setTimeout(function(){e.loadMoreStatus=1},100)}this.$http1.post("user/signal-list",{type:n.tabsInfo.tabCur,page:n.page,pageSize:n.pageSize}).then(function(a){if(n.clog("signallist",a),!a.data&&!t)return n.modalShow("toastModal","暂无记录"),!1;if(a.data){for(var i in a.data)a.data[i].map(function(t){if(1==t.type){var e=t.content.byteLength();e>50&&(t.contentSub=t.content.substr(0,50)+"...",t.islong=!0)}return t});t&&"add"==t?(n.signalList=Object.assign(n.signalList,a.data),e.showLoadMore=!1,e.loadMoreStatus=0):n.signalList=a.data}else e.loadMoreStatus=2})},api_DeleteSignal:function(){var t=this,e=this,n=this.signalList[this.deleteInfo.key],a=n[this.deleteInfo.cindex];this.$http1.post("signal/delete",{signal_id:a.id}).then(function(n){e.modalName="toastModal",e.toastText="删除信号成功",t.signalList[e.deleteInfo.key].splice(e.deleteInfo.cindex,1)}).catch(function(t){e.modalName="toastModal",e.toastText=t.msg})},loadMore:function(){this.api_SignalList("add")},tabChange:function(t){var e=this;if(t.id===this.tabsInfo.tabCur)return!1;this.page=1,this.showLoadMore=!1,this.loadMoreStatus=0,c&&(clearTimeout(c),c=!1),c=setTimeout(function(){e.signalList=null,e.tabsInfo.tabCur=t.id,e.api_SignalList()},200)},playVoice:function(t){this.audioPlay?(f.pause(),this.audioPlay=!1):t.content&&(f.src=t.content,f.play(),this.audioPlay=!0,this.audioPlayCur=t.id)},stopVoiceHandle:function(){"2"==this.tabsInfo.tabCur&&(f.paused||f.stop(),f.src="",this.audioPlay=!1)},toggleContent:function(t){t.contentSub&&(t.islong=!t.islong)},showDialogModal:function(t,e,n){this.modalName="dialogModal",this.dialogText="确定要删除该信号吗?",this.deleteInfo={key:t,cindex:n}},hideModal:function(){this.modalName=""},dialogConfirm:function(){this.clog("删除信号",this.deleteInfo),this.hideModal(),this.api_DeleteSignal()},shareModal:function(t,e,n){this.modalName="bottomModal",this.shareInfo=e},share:function(){var e=r(i.default.mark(function e(o){var s,l,r,u;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=this,l=0,r={provider:o.id,scene:o.type&&"WXSenceTimeline"===o.type?"WXSenceTimeline":"WXSceneSession",type:l,success:function(t){console.log(a("success",t," at pages\\user\\signal.vue:283")),s.modalShow("toastModal","已分享")},fail:function(t){console.log(a("fail",t," at pages\\user\\signal.vue:287")),s.modalShow("toastModal",t.errMsg)},complete:function(){console.log(a("分享操作结束!"," at pages\\user\\signal.vue:291"))}},u=1==s.shareInfo.type?s.shareInfo.content:"语音",e.t0=l,e.next=0===e.t0?7:3===e.t0?12:15;break;case 7:return r.summary="分享内容摘要:"+u,r.imageUrl=n("787b"),r.title="Meet U孤独星球",r.href="http://q.letwx.com/site/index",e.abrupt("break",15);case 12:return r.title="分享测试标题: Meet U",r.mediaUrl=s.shareInfo.content,e.abrupt("break",15);case 15:t.share(r);case 16:case"end":return e.stop()}},e,this)}));function o(t){return e.apply(this,arguments)}return o}()},onHide:function(){this.stopVoiceHandle()},onUnload:function(){this.stopVoiceHandle()}};e.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},a4b2:function(t,e,n){"use strict";n.r(e);var a=n("50cf"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},b8d8:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.signalList,function(e,n){var a=n.split("-"),i=n.split("-"),o=n.split("-");return{$orig:t.__get_orig(e),g0:a,g1:i,g2:o}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},db69:function(t,e,n){"use strict";var a=n("17a0"),i=n.n(a);i.a}},[["3483","common/runtime","common/vendor"]]]);