(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"08a3":function(e,t,a){"use strict";a.r(t);var n=a("ba23"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=i.a},"0e5c":function(e,t,a){},"3fbe":function(e,t,a){"use strict";(function(e){a("e1e3"),a("921b");n(a("66fd"));var t=n(a("a403"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},"63dc":function(e,t,a){"use strict";var n=a("0e5c"),i=a.n(n);i.a},"7cda":function(e,t,a){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return n})},a403:function(e,t,a){"use strict";a.r(t);var n=a("7cda"),i=a("08a3");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("63dc");var s,c=a("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},ba23:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("c478")),o=a("db78");function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){return a.e("meetu-ui/components/cu-modal").then(a.bind(null,"f079"))},u=e.createInnerAudioContext();u.autoplay=!0;var l={name:"serach",components:{cuModal:c},mixins:[i.default],data:function(){return{searchItemW:e.upx2px(74),searchItemH:e.upx2px(74),maxWNum:0,maxHNum:0,tempLeftNum:[],tempTopNum:[],modalName:"",isSearch:!0,searchValue:[],isNewSignal:!1,openItem:null,openNum:0,showActionTwo:!1,textareaValue:"",voicePlay:!1,starsAni:!1}},onLoad:function(){var e=this;u.onEnded(function(){console.log(n("播放结束"," at pages\\search\\search.vue:105")),e.voicePlay=!1})},onReady:function(){var e=this;setTimeout(function(){e.starsAni=!0},1500)},onShow:function(){var t=this,a=e.createSelectorQuery();a.select(".search_view").boundingClientRect(function(e){t.maxWNum=e.width/t.searchItemW,t.maxHNum=e.height/t.searchItemW,t.initData()}).exec()},watch:{isNewSignal:function(){this.isNewSignal&&this.api_SignalReceive()}},methods:{api_SignalReceive:function(){var e=this,t=this;this.$http1.post("signal/receive",{page:t.page}).then(function(a){if(e.isSearch=!1,t.clog("搜寻结果"+t.page,a),e.randomLocationLeft(),e.randomLocationTop(),a.data&&a.data.length>0){for(var n=0;n<a.data.length;n++)a.data[n].isDisplay=!0,a.data[n].top=e.tempTopNum[n],a.data[n].left=e.tempLeftNum[n];t.searchValue=a.data,e.page+=1}else t.page=1,t.api_SignalReceive()}).catch(function(t){console.log(n(t," at pages\\search\\search.vue:165")),e.modalShow("toastModal",t.msg)})},api_SignalRefresh:function(){var e=this;console.log(n("刷星"," at pages\\search\\search.vue:171"));var t=this;this.$http1.post("signal/refresh").then(function(a){t.clog("刷新信号",a),a.data.number>=5?(e.page=1,e.isNewSignal=!0):(e.isNewSignal=!1,e.api_SignalReceive())}).catch(function(t){"300010"==t.code&&(e.modalName="dialogModal",e.dialogText=t.msg,e.dialogSureText="充值星豆")})},api_SignalNeglect:function(e){var t=this;this.$http1.post("signal/neglect",{signal_id:e}).then(function(e){t.modalName="",t.stopVoiceHandle(),t.openItem=null})},api_SignalReply:function(e,t){var a=this;this.$http1.post("signal/reply",{signal_id:e,content:t}).then(function(e){a.textareaValue="",a.modalName="",a.showActionTwo=!1,a.stopVoiceHandle(),a.openItem=null,setTimeout(function(){a.modalShow("toastModal","回复成功")},100)})},initData:function(){if(e.getStorageSync("searchInfo")){var t=JSON.parse(e.getStorageSync("searchInfo"));this.clog("存储的搜索信息",t),this.isSearch=!1,this.searchValue=t.searchValue,this.page=t.page}else this.api_SignalReceive()},saveData:function(){var t=this,a={searchValue:t.searchValue,page:t.page};e.setStorage({key:"searchInfo",data:JSON.stringify(a)})},randomLocationLeft:function(){var e=this;this.tempLeftNum=(0,o.selectRandom)(5,1,this.maxWNum-1).map(function(t){return t*e.searchItemW}),console.log(n(this.tempLeftNum," at pages\\search\\search.vue:259"))},randomLocationTop:function(){var e=this;this.tempTopNum=(0,o.selectRandom)(5,1,this.maxWNum-1).map(function(t){return t*e.searchItemH})},searchChange:function(){this.tempLeftNum=[],this.tempTopNum=[],this.searchValue=[],this.isSearch=!0,this.openNum=0,this.api_SignalRefresh()},openStarHandle:function(e,t){this.modalName="Modal",this.openItem=e,this.openNum+=1,this.searchValue[t].isDisplay=!1,this.openNum,this.searchValue.length},neglectHandle:function(){this.api_SignalNeglect(this.openItem.id)},hideModal:function(){"dialogModal"==this.modalName&&(this.modalName="")},dialogConfirm:function(){this.modalName="",e.navigateTo({url:"../user/coin",animationDuration:300,animationType:"fade-in"})},playVoiceHandle:function(e){this.voicePlay?(u.pause(),this.voicePlay=!1):e&&(u.src=e,u.play(),this.voicePlay=!0)},stopVoiceHandle:function(){this.openItem&&"voice"==this.openItem.contenttype&&(u.paused||u.stop(),u.src="",this.voicePlay=!1)},actionTwoToggle:function(e){this.showActionTwo="open"==e},submitSendHandle:function(e){this.api_SignalReply(this.openItem.id,this.textareaValue)}},onHide:function(){console.log(n("----隐藏----"," at pages\\search\\search.vue:340")),this.stopVoiceHandle(),this.saveData()},onUnload:function(){this.stopVoiceHandle(),this.saveData(),console.log(n("----页面卸载----"," at pages\\search\\search.vue:350"))}};t.default=l}).call(this,a("6e42")["default"],a("0de9")["default"])}},[["3fbe","common/runtime","common/vendor"]]]);